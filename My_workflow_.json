{
  "name": "My workflow 21",
  "nodes": [
    {
      "parameters": {},
      "name": "Start",
      "type": "n8n-nodes-base.start",
      "typeVersion": 1,
      "position": [
        0,
        0
      ],
      "id": "56c04cb9-b0cf-487a-97b4-005b4e4b0e6d"
    },
    {
      "parameters": {
        "functionCode": "// Liste des 41 restaurants à Antananarivo avec image_url\nconst restaurants = [\n  {\n    \"name\": \"Le Jasmin\",\n    \"address\": \"8 Rue Paul Dussac, Analakely, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"asiatique\",\n    \"menu\": \"Nouilles sautées, Soupe wonton\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"jasmin\", \"nouilles\", \"wonton\"],\n    \"phone\": \"+261 34 62 413 75\",\n    \"image_url\": \"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"O Loft Chinois\",\n    \"address\": \"4G39+2J7, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Riz cantonais, Nems\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"loft\", \"chinois\", \"riz\", \"nems\"],\n    \"phone\": \"Non disponible\",\n    \"image_url\": \"https://images.unsplash.com/photo-1550966871-3ed3cdb5ed0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Restaurant Azalée\",\n    \"address\": \"Tananarive, Madagascar\",\n    \"cuisine_type\": \"asiatique\",\n    \"menu\": \"Poulet aigre-doux, Riz frit\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"azalée\", \"riz\"],\n    \"phone\": \"+261 34 93 601 90\",\n    \"image_url\": \"https://images.unsplash.com/photo-1512058564366-18510be2db19?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Le Grand Tsang\",\n    \"address\": \"3GVM+5JV, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"asiatique\",\n    \"menu\": \"Nouilles piquantes, Raviolis vapeur\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"tsang\", \"nouilles\", \"raviolis\"],\n    \"phone\": \"Non disponible\",\n    \"image_url\": \"https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Restaurant La Belle Ville\",\n    \"address\": \"3GQP+WJP, Rue Razafindralombo Pierre, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Porc au caramel, Tofu mapo\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"belle\", \"ville\"],\n    \"phone\": \"+261 34 03 244 36\",\n    \"image_url\": \"https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Mon Resto\",\n    \"address\": \"Ambonisoa, Arrêt Dokotera Itaosy, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Boeuf aux oignons, Chow mein\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"resto\", \"chow mein\"],\n    \"phone\": \"+261 38 92 132 40\",\n    \"image_url\": \"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Wai Man\",\n    \"address\": \"3GW6+VMX, Nord-Est, Côté Parking, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Riz cantonais, Canard laqué\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"wai\", \"man\", \"riz\"],\n    \"phone\": \"Non disponible\",\n    \"image_url\": \"https://images.unsplash.com/photo-1550966871-3ed3cdb5ed0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Hotel Seoul & Restaurant\",\n    \"address\": \"Rue Rakoto Frah, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"coréen\",\n    \"menu\": \"Bibimbap, Kimchi\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"seoul\", \"kimchi\"],\n    \"phone\": \"+261 33 14 955 27\",\n    \"image_url\": \"https://images.unsplash.com/photo-1512058564366-18510be2db19?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Lakoziako\",\n    \"address\": \"3GWF+4FP, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Nouilles sautées, Poulet kung pao\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"lakoziako\", \"nouilles\"],\n    \"phone\": \"+261 34 79 061 61\",\n    \"image_url\": \"https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"L'Eurasie - Ankorondrano\",\n    \"address\": \"Face à l'Hôtel Ibis, Ankorondrano, Antananarivo 101, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Raviolis vapeur, Canard pékinois\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"eurasie\", \"raviolis\"],\n    \"phone\": \"+261 38 51 944 37\",\n    \"image_url\": \"https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Restaurant Le Cantilène\",\n    \"address\": \"3GQ4+RWM, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Riz frit, Poulet aigre-doux\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"cantilène\", \"riz\"],\n    \"phone\": \"+261 34 86 576 67\",\n    \"image_url\": \"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Le Petit Bouchon\",\n    \"address\": \"Lot IVM, 122L Rue Agosthino Neto, Antananarivo 101, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Nems, Soupe wonton\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"bouchon\", \"nems\", \"wonton\"],\n    \"phone\": \"+261 38 92 329 02\",\n    \"image_url\": \"https://images.unsplash.com/photo-1550966871-3ed3cdb5ed0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"l'Orient Asian Fusion Restaurant\",\n    \"address\": \"Lalana Rainandriamampandry, Antananarivo 101, Madagascar\",\n    \"cuisine_type\": \"asiatique\",\n    \"menu\": \"Sushi, Nouilles sautées\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"orient\", \"nouilles\"],\n    \"phone\": \"+261 34 36 788 88\",\n    \"image_url\": \"https://images.unsplash.com/photo-1512058564366-18510be2db19?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Les Petits Plats De Maman\",\n    \"address\": \"Immeuble Art&jardin, Antaninarenina, En face Bio 33, Antananarivo 101, Madagascar\",\n    \"cuisine_type\": \"asiatique\",\n    \"menu\": \"Riz cantonais, Tempura\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"maman\", \"riz\"],\n    \"phone\": \"+261 34 03 777 71\",\n    \"image_url\": \"https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Le Pont Rouge\",\n    \"address\": \"3GQ8+9RC, Lalana Razafy Abraham, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Chow mein, Poulet au sésame\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"pont\", \"rouge\", \"chow mein\"],\n    \"phone\": \"+261 33 11 484 89\",\n    \"image_url\": \"https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Sam Voky\",\n    \"address\": \"3GP8+GGF, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Raviolis vapeur, Boeuf aux oignons\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"sam\", \"voky\", \"raviolis\"],\n    \"phone\": \"+261 34 18 685 38\",\n    \"image_url\": \"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"吕府私房菜（KTV）\",\n    \"address\": \"AUTOREXAmitie Fandian, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Dim sum, Porc caramélisé\",\n    \"has_chinese_chars\": true,\n    \"keywords\": [\"dim sum\"],\n    \"phone\": \"+261 38 82 066 66\",\n    \"image_url\": \"https://images.unsplash.com/photo-1550966871-3ed3cdb5ed0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"TSANG-KAU\",\n    \"address\": \"3GQC+R2Q, Arabe Victoire Rasoamanarivo, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Riz cantonais, Nems\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"tsang\", \"kau\", \"riz\", \"nems\"],\n    \"phone\": \"Non disponible\",\n    \"image_url\": \"https://images.unsplash.com/photo-1512058564366-18510be2db19?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Restaurant Lai\",\n    \"address\": \"3GQ4+RWG, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Nouilles sautées, Canard laqué\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"lai\", \"nouilles\"],\n    \"phone\": \"+261 32 79 660 89\",\n    \"image_url\": \"https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Quick Delice\",\n    \"address\": \"3GRG+2RM, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Poulet kung pao, Riz frit\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"delice\", \"riz\"],\n    \"phone\": \"Non disponible\",\n    \"image_url\": \"https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Dun Huang\",\n    \"address\": \"42 Arabe Andrinampoinimerina, Antananarivo 101, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Tofu mapo, Boeuf aux oignons\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"dun\", \"huang\"],\n    \"phone\": \"Non disponible\",\n    \"image_url\": \"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"ÔCG Ô Chinois Gourmand\",\n    \"address\": \"3GQ8+CC2 Bloc commercial #7, Antananarivo 101, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Raviolis vapeur, Porc au caramel\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"chinois\", \"gourmand\", \"raviolis\"],\n    \"phone\": \"+261 34 36 105 80\",\n    \"image_url\": \"https://images.unsplash.com/photo-1550966871-3ed3cdb5ed0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Restaurant Soleil d'Orient\",\n    \"address\": \"3GPH+FF8, Antananarivo 101, Madagascar\",\n    \"cuisine_type\": \"asiatique\",\n    \"menu\": \"Sushi, Nouilles piquantes\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"soleil\", \"orient\", \"nouilles\"],\n    \"phone\": \"Non disponible\",\n    \"image_url\": \"https://images.unsplash.com/photo-1512058564366-18510be2db19?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Restaurant Shanghai\",\n    \"address\": \"4 Lalana Rainitovo, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Soupe wonton, Canard pékinois\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"shanghai\", \"wonton\"],\n    \"phone\": \"Non disponible\",\n    \"image_url\": \"https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"點都德\",\n    \"address\": \"3GJC+JF6, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Dim sum, Riz cantonais\",\n    \"has_chinese_chars\": true,\n    \"keywords\": [\"dim sum\", \"riz\"],\n    \"phone\": \"Non disponible\",\n    \"image_url\": \"https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"La DYNASTIE\",\n    \"address\": \"3GP5+FHP, Arrêt FOKONTANY, Rue Seimad, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Nems, Poulet aigre-doux\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"dynastie\", \"nems\"],\n    \"phone\": \"Non disponible\",\n    \"image_url\": \"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Grand Resto de Chine\",\n    \"address\": \"Lalana Rasamuol Maurice, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"asiatique\",\n    \"menu\": \"Riz frit, Raviolis vapeur\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"chine\", \"riz\", \"raviolis\"],\n    \"phone\": \"+261 33 83 594 63\",\n    \"image_url\": \"https://images.unsplash.com/photo-1550966871-3ed3cdb5ed0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Laï tsock\",\n    \"address\": \"3GQP+4JW, Rue Razafindralombo Pierre, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"asiatique\",\n    \"menu\": \"Nouilles sautées, Soupe wonton\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"laï\", \"tsock\", \"nouilles\", \"wonton\"],\n    \"phone\": \"+261 34 30 357 57\",\n    \"image_url\": \"https://images.unsplash.com/photo-1512058564366-18510be2db19?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Kaizen Restaurant\",\n    \"address\": \"3GPR+F3J, Lalana Vvs, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Canard laqué, Chow mein\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"kaizen\", \"chow mein\"],\n    \"phone\": \"Non disponible\",\n    \"image_url\": \"https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Lotus Blanc Restaurant 荷花酒店\",\n    \"address\": \"LOT II W 23 B, Antananarivo 101, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Dim sum, Porc caramélisé\",\n    \"has_chinese_chars\": true,\n    \"keywords\": [\"lotus\", \"dim sum\"],\n    \"phone\": \"Non disponible\",\n    \"image_url\": \"https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"L' Arrivage\",\n    \"address\": \"3GRG+8Q6, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"asiatique\",\n    \"menu\": \"Sushi, Riz cantonais\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"arrivage\", \"riz\"],\n    \"phone\": \"+261 34 36 788 88\",\n    \"image_url\": \"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Panda Wock\",\n    \"address\": \"3GGW+J87, Rue Tsimanindry, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"asiatique\",\n    \"menu\": \"Nouilles piquantes, Tempura\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"panda\", \"wock\", \"nouilles\"],\n    \"phone\": \"Non disponible\",\n    \"image_url\": \"https://images.unsplash.com/photo-1550966871-3ed3cdb5ed0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"DRAGON ROYAL Restaurant\",\n    \"address\": \"Rue Me Albertini, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Riz cantonais, Nems\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"dragon\", \"royal\", \"riz\", \"nems\"],\n    \"phone\": \"+261 34 14 579 79\",\n    \"image_url\": \"https://images.unsplash.com/photo-1512058564366-18510be2db19?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Restaurant Kim-Long\",\n    \"address\": \"3GWG+62H, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Poulet kung pao, Raviolis vapeur\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"kim\", \"long\", \"raviolis\"],\n    \"phone\": \"Non disponible\",\n    \"image_url\": \"https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Restaurant Villa Soleil 鳳城酒家\",\n    \"address\": \"Lot IVK 89 bis Anosivavaka Ambohimanarina, Antananarivo 101, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Canard pékinois, Tofu mapo\",\n    \"has_chinese_chars\": true,\n    \"keywords\": [\"villa\", \"soleil\"],\n    \"phone\": \"+261 33 11 336 28\",\n    \"image_url\": \"https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Sweet Talk by Coq d'Or (Boutique)\",\n    \"address\": \"4F5R+2V3, Andohatapenaka, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Riz frit, Nems\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"coq\", \"or\", \"riz\", \"nems\"],\n    \"phone\": \"+261 34 84 042 76\",\n    \"image_url\": \"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Restaurant Fong Mei\",\n    \"address\": \"4GHM+JMX, Rue Andriantsihoarana Ratsimbazafy, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Soupe wonton, Boeuf aux oignons\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"fong\", \"mei\", \"wonton\"],\n    \"phone\": \"+261 33 25 571 99\",\n    \"image_url\": \"https://images.unsplash.com/photo-1550966871-3ed3cdb5ed0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"逸香酒樓 Yixiang Restaurant\",\n    \"address\": \"IVT 10, 4G48+V2P, Rue Docteur Joseph Raseta, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Dim sum, Porc caramélisé\",\n    \"has_chinese_chars\": true,\n    \"keywords\": [\"yixiang\", \"dim sum\"],\n    \"phone\": \"+261 34 57 088 88\",\n    \"image_url\": \"https://images.unsplash.com/photo-1512058564366-18510be2db19?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Restaurant 19° C\",\n    \"address\": \"4G9C+8Q2, Galana service station, Rue Ravoninahitriniarivo Ankorondrano, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Raviolis vapeur, Chow mein\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"19\", \"raviolis\", \"chow mein\"],\n    \"phone\": \"+261 34 02 818 66\",\n    \"image_url\": \"https://images.unsplash.com/photo-1504674900247-0877df9cc836?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Le Grand Orient\",\n    \"address\": \"Rue Andriantsihoarana Ratsimbazafy, Antananarivo 101, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Nems, Canard laqué\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"orient\", \"nems\"],\n    \"phone\": \"+261 20 22 202 88\",\n    \"image_url\": \"https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  },\n  {\n    \"name\": \"Restaurant Lo&Ma\",\n    \"address\": \"III D 12, Antananarivo, Madagascar\",\n    \"cuisine_type\": \"chinois\",\n    \"menu\": \"Riz cantonais, Poulet aigre-doux\",\n    \"has_chinese_chars\": false,\n    \"keywords\": [\"lo\", \"ma\", \"riz\"],\n    \"phone\": \"+261 34 18 892 74\",\n    \"image_url\": \"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150\"\n  }\n];\n\nreturn [{\n  json: { restaurants }\n}];"
      },
      "name": "Function - Données Restaurants",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        200,
        0
      ],
      "id": "3fe70115-ad1c-430b-a3b4-db20a9a9ae36"
    },
    {
      "parameters": {
        "functionCode": "// Calculer la probabilité qu'un restaurant soit chinois\nfunction calculateProbability(restaurant) {\n  let score = 0;\n  const criteria = {\n    'has_chinese_chars': 0.8,\n    'cuisine_type_chinois': 0.9,\n    'menu_contains_riz': 0.3,\n    'menu_contains_nouilles': 0.4,\n    'name_contains_chinese_word': 0.6\n  };\n  if (restaurant.has_chinese_chars) score += criteria.has_chinese_chars;\n  if (restaurant.cuisine_type.toLowerCase().includes('chinois')) score += criteria.cuisine_type_chinois;\n  if (restaurant.menu.toLowerCase().includes('riz')) score += criteria.menu_contains_riz;\n  if (restaurant.menu.toLowerCase().includes('nouille')) score += criteria.menu_contains_nouilles;\n  const chineseWords = ['chine', 'wok', 'pekin', 'shanghai', 'beijing', 'dragon', 'lotus', 'noodle', 'orient', 'tsang', 'dynastie', 'yixiang', 'dim sum', 'lai', 'fong', 'kim', 'panda', 'soleil', 'coq', 'royal'];\n  const nameLower = restaurant.name.toLowerCase();\n  if (chineseWords.some(word => nameLower.includes(word))) score += criteria.name_contains_chinese_word;\n  const probability = 1 / (1 + Math.exp(-score));\n  return Math.round(probability * 100);\n}\n\n// Appliquer le calcul et préparer le test Khi-deux\nconst restaurantsWithProbability = items[0].json.restaurants.map(restaurant => {\n  return {\n    ...restaurant,\n    probability: calculateProbability(restaurant),\n    is_chinese: restaurant.cuisine_type.toLowerCase().includes('chinois')\n  };\n});\n\nconst observed = [\n  [\n    restaurantsWithProbability.filter(r => r.has_chinese_chars && r.is_chinese).length,\n    restaurantsWithProbability.filter(r => r.has_chinese_chars && !r.is_chinese).length\n  ],\n  [\n    restaurantsWithProbability.filter(r => !r.has_chinese_chars && r.is_chinese).length,\n    restaurantsWithProbability.filter(r => !r.has_chinese_chars && !r.is_chinese).length\n  ]\n];\n\nreturn [{\n  json: {\n    restaurants: restaurantsWithProbability,\n    chi2_data: observed\n  }\n}];"
      },
      "name": "Function - Calcul Probabilité",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        400,
        0
      ],
      "id": "da3e2c14-9c35-4534-8c71-174bda31c4cc"
    },
    {
      "parameters": {
        "functionCode": "// Générer le lien Google Maps\nfunction generateGoogleMapsLink(address) {\n  return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(address || '')}`;\n}\n\n// Vérifier les données d'entrée\nconst item = items[0] || {};\nconst restaurants = Array.isArray(item.json?.restaurants) ? item.json.restaurants : [];\nconst chi2Data = Array.isArray(item.json?.chi2_data) && item.json.chi2_data.every(row => Array.isArray(row)) ? item.json.chi2_data : [[0, 0], [0, 0]];\n\n// Calcul du test Khi-deux\nconst total = chi2Data[0][0] + chi2Data[0][1] + chi2Data[1][0] + chi2Data[1][1] || 1; // Éviter division par 0\nconst expected = [\n  [(chi2Data[0][0] + chi2Data[0][1]) * (chi2Data[0][0] + chi2Data[1][0]) / total,\n   (chi2Data[0][0] + chi2Data[0][1]) * (chi2Data[0][1] + chi2Data[1][1]) / total],\n  [(chi2Data[1][0] + chi2Data[1][1]) * (chi2Data[0][0] + chi2Data[1][0]) / total,\n   (chi2Data[1][0] + chi2Data[1][1]) * (chi2Data[0][1] + chi2Data[1][1]) / total]\n];\n\nlet chi2 = 0;\nfor (let i = 0; i < 2; i++) {\n  for (let j = 0; j < 2; j++) {\n    chi2 += expected[i][j] ? Math.pow(chi2Data[i][j] - expected[i][j], 2) / expected[i][j] : 0;\n  }\n}\nconst pValue = 1 - Math.exp(-chi2 / 2); // Approximation pour p\n\n// Filtrer les restaurants chinois confirmés\nconst chineseRestaurants = restaurants.filter(r => r.is_chinese && r.probability > 70);\nconst avgProbability = chineseRestaurants.length > 0 ? Math.round(chineseRestaurants.reduce((sum, r) => sum + (r.probability || 0), 0) / chineseRestaurants.length) : 0;\n\n// Générer l'HTML avec un design moderne\nlet html = `<!DOCTYPE html>\n<html lang=\"fr\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Restaurants Chinois à Antananarivo</title>\n  <link href=\"https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap\" rel=\"stylesheet\">\n  <style>\n    * { box-sizing: border-box; margin: 0; padding: 0; }\n    body { font-family: 'Roboto', sans-serif; background-color: #f8f9fa; color: #333; line-height: 1.6; padding: 20px; }\n    .container { max-width: 1200px; margin: 0 auto; }\n    h1 { text-align: center; color: #c0392b; margin-bottom: 20px; font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0,0,0,0.1); }\n    .subtitle { text-align: center; color: #555; margin-bottom: 30px; font-size: 1.2em; }\n    .stats { background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); margin-bottom: 30px; }\n    .stats p { font-size: 1.1em; margin: 10px 0; }\n    .stats h2 { color: #c0392b; margin-bottom: 15px; }\n    table { width: 100%; border-collapse: collapse; margin: 20px 0; background: #fff; border-radius: 8px; overflow: hidden; }\n    th, td { border: 1px solid #ddd; padding: 12px; text-align: center; }\n    th { background: #c0392b; color: #fff; }\n    .restaurants { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }\n    .restaurant { background: #fff; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1); transition: transform 0.3s; }\n    .restaurant:hover { transform: translateY(-5px); }\n    .restaurant img { width: 100%; height: 150px; object-fit: cover; }\n    .restaurant-content { padding: 15px; }\n    .restaurant h3 { color: #c0392b; margin-bottom: 10px; font-size: 1.5em; }\n    .high-prob { color: #27ae60; font-weight: bold; font-size: 1.3em; margin-bottom: 10px; }\n    .restaurant p { margin: 8px 0; font-size: 1em; }\n    .restaurant a { display: inline-block; margin-top: 10px; color: #d4a017; text-decoration: none; font-weight: bold; transition: color 0.3s; }\n    .restaurant a:hover { color: #c0392b; }\n    .footer { text-align: center; margin-top: 40px; color: #777; font-size: 0.9em; }\n    @media (max-width: 768px) { .restaurants { grid-template-columns: 1fr; } h1 { font-size: 2em; } }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <h1>Restaurants Chinois à Antananarivo</h1>\n    <p class=\"subtitle\">Analyse automatique basée sur plusieurs critères</p>\n\n    <div class=\"stats\">\n      <p><strong>Restaurants analysés :</strong> ${restaurants.length}</p>\n      <p><strong>Probabilité moyenne :</strong> ${avgProbability}%</p>\n      <p><strong>Restaurants probables :</strong> ${chineseRestaurants.length}</p>\n    </div>\n\n    <div class=\"stats\">\n      <h2>Test Statistique Khi-deux</h2>\n      <p>Vérification de la corrélation entre les caractéristiques chinoises et la classification :</p>\n      <table>\n        <tr><th></th><th>Classé Chinois</th><th>Non Chinois</th><th>Total</th></tr>\n        <tr><td>Caractéristiques chinoises</td><td>${chi2Data[0][0]}</td><td>${chi2Data[0][1]}</td><td>${chi2Data[0][0] + chi2Data[0][1]}</td></tr>\n        <tr><td>Pas de caractéristiques</td><td>${chi2Data[1][0]}</td><td>${chi2Data[1][1]}</td><td>${chi2Data[1][0] + chi2Data[1][1]}</td></tr>\n        <tr><td>Total</td><td>${chi2Data[0][0] + chi2Data[1][0]}</td><td>${chi2Data[0][1] + chi2Data[1][1]}</td><td>${total}</td></tr>\n      </table>\n      <p><strong>Valeur Khi-deux :</strong> ${chi2.toFixed(2)} (p = ${pValue.toFixed(3)})</p>\n      <p><strong>Conclusion :</strong> ${pValue < 0.05 ? 'La corrélation est statistiquement significative (p < 0.05)' : 'Aucune corrélation significative'}</p>\n    </div>\n\n    <h2>Liste des Restaurants</h2>\n    <div class=\"restaurants\">\n`;\n\nchineseRestaurants.forEach(restaurant => {\n  const imageUrl = restaurant.image_url || 'https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=150';\n  const menu = Array.isArray(restaurant.menu) ? restaurant.menu.join(', ') : (restaurant.menu || 'Non spécifié');\n  const keywords = Array.isArray(restaurant.keywords) ? restaurant.keywords.join(', ') : (restaurant.keywords || '');\n  html += `\n      <div class=\"restaurant\">\n        <img src=\"${imageUrl}\" alt=\"${restaurant.name || 'Restaurant'}\">\n        <div class=\"restaurant-content\">\n          <h3>${restaurant.name || 'Nom inconnu'}</h3>\n          <p class=\"high-prob\">${restaurant.probability || 0}%</p>\n          <p><strong>Adresse :</strong> ${restaurant.address || 'Non disponible'}</p>\n          <p><strong>Téléphone :</strong> ${restaurant.phone || 'Non disponible'}</p>\n          <p><strong>Type :</strong> ${restaurant.cuisine_type || 'chinois'}</p>\n          <p><strong>Menu :</strong> ${menu}</p>\n          <p><strong>Caractéristiques :</strong> ${restaurant.has_chinese_chars ? 'Caractères chinois, ' : ''}${keywords}</p>\n          <a href=\"${generateGoogleMapsLink(restaurant.address)}\" target=\"_blank\">Voir sur Google Maps</a>\n        </div>\n      </div>\n`;\n});\n\nhtml += `\n    </div>\n    <p class=\"footer\">Analyse générée automatiquement - ${new Date().toLocaleDateString('fr-FR')}.</p>\n  </div>\n</body>\n</html>`;\n\n// Vérifier que l'HTML est une chaîne valide\nif (typeof html !== 'string' || html.length === 0) {\n  throw new Error('Erreur : l\\'HTML généré est vide ou invalide');\n}\n\n// Retourner l'HTML comme données binaires\nreturn [{\n  json: { html }, // Pour débogage\n  binary: {\n    data: Buffer.from(html, 'utf8') // Assurer un Buffer valide\n  }\n}];"
      },
      "name": "Function - Générer HTML",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [
        600,
        0
      ],
      "id": "f73acdc5-e12c-41d4-a7d9-854b3c887265"
    },
    {
      "parameters": {
        "fileName": "chinese_restaurants_antananarivo.html",
        "options": {
          "append": false
        }
      },
      "name": "Write Binary File",
      "type": "n8n-nodes-base.writeBinaryFile",
      "typeVersion": 1,
      "position": [
        800,
        0
      ],
      "id": "cebcd922-15cf-45ee-8a41-501982354244"
    }
  ],
  "pinData": {},
  "connections": {
    "Start": {
      "main": [
        [
          {
            "node": "Function - Données Restaurants",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Function - Données Restaurants": {
      "main": [
        [
          {
            "node": "Function - Calcul Probabilité",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Function - Calcul Probabilité": {
      "main": [
        [
          {
            "node": "Function - Générer HTML",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Function - Générer HTML": {
      "main": [
        [
          {
            "node": "Write Binary File",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "ec813757-6321-497a-9cd6-0697688e8a5d",
  "meta": {
    "instanceId": "55468316f7fa126aa52ebdfe79a83c5b68127509f6519923863765804bbfe41a"
  },
  "id": "aJII2JQIXdxOdEc4",
  "tags": []
}